(this.webpackJsonpbooks=this.webpackJsonpbooks||[]).push([[0],{23:function(e,t,a){e.exports=a(36)},28:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(21),s=a.n(c),l=a(4),o=a(6),i=a(8),u=a(7),m=(a(28),a(1)),p=function(e){var t=e.item,a=e.index;return n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},a+1),n.a.createElement("td",null,n.a.createElement(m.b,{to:"/books/".concat(t.id)},t.name)),n.a.createElement("td",null,t.authors.join()),n.a.createElement("td",null,t.numberOfPages),n.a.createElement("td",null,t.country))},h=a(15),g=a(5),E=a.n(g),d=a(12),b=function e(){var t=this;Object(l.a)(this,e),this._parseHeaders=function(e){return e.headers.get("link").split(",").reduce((function(e,a){var r=/^\<(.+)\>; rel="(.+)"$/.exec(a.trim());return r?(e[r[2]]=t._pageNumber(r[1]),e):(console.warn("no match"),e)}),{})},this._pageNumber=function(e){return new URL(e).searchParams.get("page")},this._apiBase="https://www.anapioficeandfire.com/api",this.getResource=function(){var e=Object(d.a)(E.a.mark((function e(a){var r,n,c;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(a));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("\u041d\u0430 ".concat(a," \u0441\u044b\u043b\u043a\u0435 ").concat(r.status));case 5:return n=t._parseHeaders(r),e.next=8,r.json();case 8:return c=(c=(c=(c=e.sent).map(t._transformBooks)).map(t._transformCharacters)).map(t._transformHouses),e.abrupt("return",{json:c,props:n});case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getResourceDetail=function(){var e=Object(d.a)(E.a.mark((function e(a){var r;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(t._apiBase).concat(a));case 2:if((r=e.sent).ok){e.next=5;break}throw new Error("\u041d\u0430 ".concat(a," \u0441\u0441\u044b\u043b\u043a\u0435 ").concat(r.status));case 5:return e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getBooks=Object(d.a)(E.a.mark((function e(){var a,r,n=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:1,r=n.length>1&&void 0!==n[1]?n[1]:10,e.next=4,t.getResource("/books?page=".concat(a,"&pageSize=").concat(r));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),this.getBookDetail=Object(d.a)(E.a.mark((function e(){var a,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:1,e.next=3,t.getResourceDetail("/books/".concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),this.getCharacters=Object(d.a)(E.a.mark((function e(){var a,r,n=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:1,r=n.length>1&&void 0!==n[1]?n[1]:10,e.next=4,t.getResource("/characters?page=".concat(a,"&pageSize=").concat(r));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),this.getCharactersDetail=Object(d.a)(E.a.mark((function e(){var a,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:1,e.next=3,t.getResourceDetail("/characters/".concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),this.getHouses=Object(d.a)(E.a.mark((function e(){var a,r,n=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.length>0&&void 0!==n[0]?n[0]:1,r=n.length>1&&void 0!==n[1]?n[1]:10,e.next=4,t.getResource("/houses?page=".concat(a,"&pageSize=").concat(r));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)}))),this.getHousesDetail=Object(d.a)(E.a.mark((function e(){var a,r=arguments;return E.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.length>0&&void 0!==r[0]?r[0]:1,e.next=3,t.getResourceDetail("/houses/".concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),this._transformBooks=function(e){var t=e.url.match(/\d+/)[0];return Object(h.a)({id:t},e)},this._transformCharacters=function(e){var t=e.url.match(/\d+/)[0];return Object(h.a)({id:t},e)},this._transformHouses=function(e){var t=e.url.match(/\d+/)[0];return Object(h.a)({id:t},e)}},f=a(2),v=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).bookService=new b,e.state={loading:!0,data:[],props:{},hasError:!1},e.setError=function(){e.setState({hasError:!0})},e.setData=function(){var t=new URLSearchParams(e.props.location.search).get("page");e.bookService.getBooks(t).then((function(t){e.setState({data:t.json,loading:!1,props:t.props})}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setData()}},{key:"componentDidUpdate",value:function(e,t,a){e.location.search!==this.props.location.search&&this.setData()}},{key:"render",value:function(){this.state.hasError&&(this.to.do=0);var e=this.state,t=e.loading,a=e.data;if(t)return n.a.createElement("p",null,"Loading...");var r=this.state.props,c=r.prev,s=r.next,l=r.last,o=r.first;return n.a.createElement("div",{className:" book-list"},n.a.createElement("button",{onClick:this.setError,className:"btn btn-error"},"Error"),n.a.createElement("h1",null,"Book list"),n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"#"),n.a.createElement("th",{scope:"col"},"Name"),n.a.createElement("th",{scope:"col"},"Authors"),n.a.createElement("th",{scope:"col"},"Number Of Pages"),n.a.createElement("th",{scope:"col"},"Country"))),n.a.createElement("tbody",null,a.map((function(e,t){return n.a.createElement(p,{key:t,item:e,index:t})})))),n.a.createElement("nav",{"aria-label":"Page navigation example"},n.a.createElement("ul",{className:"pagination"},o&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/",search:"?page="+o}},"First")),c&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/",search:"?page="+c}},"Prev")),s&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/",search:"?page="+s}},"Next")),l&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/",search:"?page="+l}},"Last")))))}}]),a}(r.Component),k=Object(f.f)(v),N=function(e){var t=e.item,a=e.index;return n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},a+1),n.a.createElement("td",null,n.a.createElement(m.b,{to:"/characters/".concat(t.id)},t.name)),n.a.createElement("td",null,t.gender),n.a.createElement("td",null,t.culture),n.a.createElement("td",null,t.born))},j=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).bookService=new b,e.state={loading:!0,data:[],props:{}},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(this.props.location.search).get("page");this.bookService.getCharacters(t).then((function(t){e.setState({data:t.json,loading:!1,props:t.props})}))}},{key:"componentDidUpdate",value:function(e,t,a){var r=this;if(e.location.search!==this.props.location.search){var n=new URLSearchParams(this.props.location.search).get("page");this.bookService.getCharacters(n).then((function(e){r.setState({data:e.json,loading:!1,props:e.props})}))}}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.data;if(t)return n.a.createElement("p",null,"Loading...");var r=this.state.props,c=r.prev,s=r.next,l=r.last,o=r.first;return n.a.createElement("div",{className:" book-list"},n.a.createElement("h1",null,"Character list"),n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"#"),n.a.createElement("th",{scope:"col"},"Name"),n.a.createElement("th",{scope:"col"},"Gender"),n.a.createElement("th",{scope:"col"},"Culture"),n.a.createElement("th",{scope:"col"},"Born"))),n.a.createElement("tbody",null,a.map((function(e,t){return n.a.createElement(N,{key:t,item:e,index:t})})))),n.a.createElement("nav",{"aria-label":"Page navigation example"},n.a.createElement("ul",{className:"pagination"},o&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/characters",search:"?page="+o}},"First")),c&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/characters",search:"?page="+c}},"Prev")),s&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/characters",search:"?page="+s}},"Next")),l&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/characters",search:"?page="+l}},"Last")))))}}]),a}(r.Component),O=Object(f.f)(j),y=(a(35),function(e){var t=e.item,a=e.index;return n.a.createElement("tr",null,n.a.createElement("th",{scope:"row"},a+1),n.a.createElement("td",null,n.a.createElement(m.b,{to:"/houses/".concat(t.id)},t.name)),n.a.createElement("td",null,t.region),n.a.createElement("td",null,t.coatOfArms),n.a.createElement("td",null,t.words))}),w=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).bookService=new b,e.state={loading:!0,data:[],props:{}},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new URLSearchParams(this.props.location.search).get("page");this.bookService.getHouses(t).then((function(t){e.setState({data:t.json,loading:!1,props:t.props})}))}},{key:"componentDidUpdate",value:function(e,t,a){var r=this;if(e.location.search!==this.props.location.search){var n=new URLSearchParams(this.props.location.search).get("page");this.bookService.getHouses(n).then((function(e){r.setState({data:e.json,loading:!1,props:e.props})}))}}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.data;if(t)return n.a.createElement("p",null,"Loading...");var r=this.state.props,c=r.prev,s=r.next,l=r.last,o=r.first;return n.a.createElement("div",{className:" book-list"},n.a.createElement("h1",null,"Houses list"),n.a.createElement("table",{className:"table"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",{scope:"col"},"#"),n.a.createElement("th",{scope:"col"},"Name"),n.a.createElement("th",{scope:"col"},"Authors"),n.a.createElement("th",{scope:"col"},"Number Of Pages"),n.a.createElement("th",{scope:"col"},"Country"))),n.a.createElement("tbody",null,a.map((function(e,t){return n.a.createElement(y,{key:t,item:e,index:t})})))),n.a.createElement("nav",{"aria-label":"Page navigation example"},n.a.createElement("ul",{className:"pagination"},o&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/houses",search:"?page="+o}},"First")),c&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/houses",search:"?page="+c}},"Prev")),s&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/houses",search:"?page="+s}},"Next")),l&&n.a.createElement("li",{className:"page-item"},n.a.createElement(m.b,{className:"page-link",to:{pathname:"/houses",search:"?page="+l}},"Last")))))}}]),a}(r.Component),x=Object(f.f)(w),S=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).booksService=new b,e.state={book:{},loading:!0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.booksService.getBookDetail(t).then((function(t){e.setState({book:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.book;return e.loading?n.a.createElement("p",null,"Loading..."):n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},"Name:",t.name),n.a.createElement("li",{className:"list-group-item"},"Authors:",t.authors.join()),n.a.createElement("li",{className:"list-group-item"},"Country:",t.country),n.a.createElement("li",{className:"list-group-item"},"isbn:",t.isbn),n.a.createElement("li",{className:"list-group-item"},"mediaType:",t.mediaType),n.a.createElement("li",{className:"list-group-item"},"numberOfPages:",t.numberOfPages),n.a.createElement("li",{className:"list-group-item"},"publisher:",t.publisher),n.a.createElement("li",{className:"list-group-item"},"released:",t.released),n.a.createElement("li",{className:"list-group-item"},"url:",t.url))}}]),a}(r.Component),C=Object(f.f)(S),D=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).caractersService=new b,e.state={characters:{},loading:!0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.caractersService.getCharactersDetail(t).then((function(t){e.setState({characters:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.characters,a=e.loading;return console.log(t),a?n.a.createElement("p",null,"Loading..."):n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},"aliases:  ",t.aliases.join()),n.a.createElement("li",{className:"list-group-item"},"allegiances:  ",t.allegiances.join()),n.a.createElement("li",{className:"list-group-item"},"playedBy:  ",t.playedBy.join()),n.a.createElement("li",{className:"list-group-item"},"povBooks:  ",t.povBooks.join()),n.a.createElement("li",{className:"list-group-item"},"titles:  ",t.titles.join()),n.a.createElement("li",{className:"list-group-item"},"tvSeries:  ",t.tvSeries.join()))}}]),a}(r.Component),B=Object(f.f)(D),P=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).housesService=new b,e.state={houses:{},loading:!0},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.housesService.getHousesDetail(t).then((function(t){e.setState({houses:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.houses;return e.loading?n.a.createElement("p",null,"Loading..."):n.a.createElement("ul",{className:"list-group"},n.a.createElement("li",{className:"list-group-item"},"Name:",t.name),n.a.createElement("li",{className:"list-group-item"},"CoatOfArms:",t.coatOfArms),n.a.createElement("li",{className:"list-group-item"},"Overlord:",t.overlord),n.a.createElement("li",{className:"list-group-item"},"Region:",t.region))}}]),a}(r.Component),L=Object(f.f)(P),R=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).state={error:!1},e}return Object(o.a)(a,[{key:"componentDidCatch",value:function(e,t){this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?n.a.createElement("h1",null,"Has error"):this.props.children}}]),a}(r.Component),A=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var r=arguments.length,n=new Array(r),c=0;c<r;c++)n[c]=arguments[c];return(e=t.call.apply(t,[this].concat(n))).booksService=new b,e}return Object(o.a)(a,[{key:"render",value:function(){return n.a.createElement("div",{className:"container jumbotron"},n.a.createElement(m.b,{to:"/"},n.a.createElement("button",{className:"btn btn-primary"},"Books  fdfdfd fdfef")),n.a.createElement(m.b,{to:"/characters"},n.a.createElement("button",{className:"btn btn-primary"},"Characters")),n.a.createElement(m.b,{to:"/houses"},n.a.createElement("button",{className:"btn btn-primary"},"Houses")),n.a.createElement("hr",null),n.a.createElement(f.c,null,n.a.createElement(f.a,{exact:!0,path:"/"},n.a.createElement(R,null,n.a.createElement(k,null))),n.a.createElement(f.a,{exact:!0,path:"/characters"},n.a.createElement(O,null)),n.a.createElement(f.a,{exact:!0,path:"/houses"},n.a.createElement(x,null)),n.a.createElement(f.a,{exact:!0,path:"/books/:id"},n.a.createElement(C,null)),n.a.createElement(f.a,{exact:!0,path:"/characters/:id"},n.a.createElement(B,null)),n.a.createElement(f.a,{exact:!0,path:"/houses/:id"},n.a.createElement(L,null))))}}]),a}(r.Component);s.a.render(n.a.createElement(m.a,null,n.a.createElement(A,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.5ac4b280.chunk.js.map